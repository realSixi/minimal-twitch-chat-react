(this["webpackJsonpminimal-twitch-chat"]=this["webpackJsonpminimal-twitch-chat"]||[]).push([[0],{102:function(e,t){},133:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(38),c=n.n(r),i=(n(82),n(27)),o=(n.p,n(13)),u=n(41),l=n(47),m=n(11),d=n(9),b=Object(d.a)("chat/channel"),j=Object(d.a)("chat/joined"),p=Object(d.a)("chat/message"),f=Object(d.a)("chat/message-deleted"),h=Object(d.a)("chat/ban"),g=Object(d.a)("chat/timeout"),x=Object(d.a)("chat/delete-message"),O=Object(d.a)("chat/reset"),v=Object(d.a)("chat/reset-messages"),y=Object(d.a)("chat/connected"),w={resetChat:O,chatMessage:p,selectChannel:b,channelJoined:j,banUser:h,timeoutUser:g,deleteMessage:x,chatMessageDeleted:f,resetMessages:v,connected:y},k={messages:[],userMessageCount:{}},C=Object(d.b)(k,(function(e){e.addCase(v,(function(e,t){return Object(m.a)(Object(m.a)({},k),{},{channelName:e.channelName})})).addCase(O,(function(e,t){return Object(m.a)({},k)})).addCase(b,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{messages:[]})})).addCase(j,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{channelName:t.payload})})).addCase(p,(function(e,t){var n=t.payload.userstate["display-name"]||"anonymous";if(t.payload.userstate["reply-parent-msg-id"]){var a=!1;e.messages=e.messages.map((function(e){return e.id===t.payload.userstate["reply-parent-msg-id"]&&(e.subMessages=[].concat(Object(l.a)(e.subMessages||[]),[t.payload]),a=!0),e})),a||(e.messages=[t.payload].concat(Object(l.a)(e.messages.slice(0,300))))}else e.messages=[t.payload].concat(Object(l.a)(e.messages.slice(0,300)));e.userMessageCount=Object(m.a)(Object(m.a)({},e.userMessageCount),{},Object(u.a)({},n,(e.userMessageCount[n]||0)+1))})).addCase(f,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{messages:e.messages.map((function(e){return e.id===t.payload.messageId?Object(m.a)(Object(m.a)({},e),{},{deleted:!0}):e}))})}))})),N=n(16),I=function(e){return e.chat},T={getMessages:Object(N.a)(I,(function(e){return e.messages})),getMessageCount:function(e){return Object(N.a)(I,(function(t){return t.userMessageCount[e||"anonymous"]||1}))},getChannelName:Object(N.a)(I,(function(e){return e.channelName}))},_=C,D=(n.p,n(50)),M=n.n(D);var E,S=function(e){var t=function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(e);return M.a.hsl(t%360,.7,.7).hex()},A=(n.p,n(71)),z=n.n(A),L=n(21);!function(e){e[e.chat=0]="chat",e[e.action=1]="action",e[e.cheer=2]="cheer",e[e.sub=3]="sub",e[e.resub=4]="resub",e[e.subgift=5]="subgift",e[e.submysterygift=6]="submysterygift",e[e.anonsubgift=7]="anonsubgift",e[e.primepaidupgrade=8]="primepaidupgrade",e[e.host=9]="host",e[e.raid=10]="raid",e[e.status=11]="status"}(E||(E={}));var B=n(2),W=function(e){var t=e.timestamp,n=e.usercolor,a=e.username,s=e.message,r=e.messageClassName,c=e.messageColor,i=e.className,u=e.userClassName,l=e.userstate,m=e.subMessages,d=e.type,b=Object(o.e)(T.getMessageCount(a));return Object(B.jsxs)("div",{className:"m-2",children:[Object(B.jsxs)("div",{className:Object(L.a)("chat-message shadow-md flex p-2 rounded-md space-x-2 text-2xl",i),children:[Object(B.jsx)("div",{className:"flex-shrink-0 leading-9 text-sm w-14 text-gray-600",children:z()(t).format("HH:mm:ss")}),Object(B.jsxs)("div",{style:{minWidth:"1.2rem"},className:"flex-shrink-0 space-x-1 text-sm h-9 flex items-center content-center text-gray-900",children:[d===E.chat&&1===b&&Object(B.jsx)("div",{className:"text-gray-900 text-sm inline-block bg-pink-600 flex items-center justify-center rounded-full w-5 text-center h-5",children:"#1"}),l&&l["custom-reward-id"]&&Object(B.jsx)("div",{className:"text-gray-900 text-sm inline-block bg-indigo-900 flex items-center justify-center rounded-full w-5 text-center h-5",children:"R"})]}),Object(B.jsxs)("div",{children:[Object(B.jsxs)("span",{style:{color:n},className:Object(L.a)(u),children:[a," "]}),Object(B.jsx)("span",{style:{color:c},className:Object(L.a)("flex-1",r||"dark:text-gray-300"),children:s})]})]}),m&&m.map((function(e){return Object(B.jsx)("div",{className:"ml-4 -mr-2 ",children:Object(B.jsx)(P,{message:e})})}))]})},R=n(35),U=function(e){e.map((function(e){if("string"===typeof e)e.match(/([a-zA-Z]*)(\d+)/);return e}));return e},F=function(e,t){if(!t)return[e];var n=[],a=[];Object.entries(t||[]).forEach((function(t){var n=Object(R.a)(t,2),s=n[0],r=n[1];Object.values(r).forEach((function(t,n){var r=t.split("-"),c=Object(R.a)(r,2),i=c[0],o=c[1];a.push({start:parseInt(i),stringToReplace:e.substring(parseInt(i),parseInt(o)+1),replacement:Object(B.jsx)("img",{style:{display:"inline",width:"1.1em"},src:"https://static-cdn.jtvnw.net/emoticons/v2/".concat(s,"/default/dark/2.0")},"emote-".concat(s,"-").concat(n))})}))}));var s=e;return a.sort((function(e,t){return e.start-t.start})).forEach((function(e){var t=e.stringToReplace,a=e.replacement;if(s){var r=s.split(t);n.push(r[0]),n.push(a),s=s.replace(r[0],"").replace(t,"")}})),n.push(s),n},H=function(e){return e.map((function(e){if("string"===typeof e){var t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/;return e.split(" ").map((function(e){return t.test(e)?Object(B.jsxs)("a",{className:"text-pink-300",target:"_blank",href:e,children:[e," "]},e):e+" "}))}return e}))},P=function(e){var t,n=e.message,a=S(n.userstate["display-name"]||String(Math.random()));return Object(B.jsx)(W,{timestamp:n.timestamp,type:n.type,className:"bg-gray-900",userstate:n.userstate,username:n.userstate["display-name"],usercolor:n.userstate.color?(t=n.userstate.color,M()(t).get("lab.l")<30?a:n.userstate.color):a,message:H(F(n.message,n.userstate.emotes)),subMessages:n.subMessages,messageClassName:Object(L.a)([n.deleted&&"text-gray-600","action"===n.userstate["message-type"]&&"italic"])})},Z=(n.p,function(e){var t=e.message;return Object(B.jsx)(W,{timestamp:t.timestamp,type:t.type,className:"bg-blue-800 bg-opacity-70",usercolor:t.userstate.color||S(t.userstate["display-name"]||String(Math.random())),username:"".concat(t.userstate["display-name"]," hat ").concat(t.userstate.bits," Bits gecheered"),message:U(F(t.message,t.userstate.emotes))})}),J=(n.p,function(e){var t=e.message;return Object(B.jsx)(W,{timestamp:t.timestamp,className:"bg-yellow-700",type:t.type,userClassName:"dark:text-gray-900",username:t.userstate["display-name"],messageClassName:"dark:text-gray-900",message:F(t.message,t.userstate.emotes)})}),G=(n.p,function(e){var t=e.message;return Object(B.jsx)(W,{timestamp:t.timestamp,className:"bg-purple-900 bg-opacity-70",usercolor:t.userstate.color||S(t.userstate["display-name"]||String(Math.random())),username:"".concat(t.userstate["display-name"]," hat ein Abo (").concat(t.userstate["msg-param-sub-plan"],") im ").concat(t.userstate["msg-param-cumulative-months"],". Monat abgeschlossen: "),message:F(t.message,t.userstate.emotes)})}),K=(n.p,function(e){var t=e.message;return Object(B.jsx)(W,{timestamp:t.timestamp,className:"bg-purple-800 bg-opacity-70",type:t.type,usercolor:t.userstate.color||S(t.userstate["display-name"]||String(Math.random())),username:t.userstate["display-name"],message:F(t.message,t.userstate.emotes)})}),q=n(44),V=n(43),Y=n.n(V),Q=function(e){var t=e.message;return Object(B.jsx)(W,{timestamp:t.timestamp,className:"bg-gray-800 bg-opacity-70",messageClassName:"italic text-purple-500",message:t.message})},X=function(e){Object(i.a)(e);var t=Object(o.d)(),n=Object(o.e)(T.getMessages),s=Object(q.f)(),r=Y.a.parse(s.search);return Object(a.useEffect)((function(){r.channel&&t(w.selectChannel(r.channel))}),[r.channel]),Object(B.jsx)("div",{className:"chat bg-gray ",children:n.filter((function(e){if(!e.message||0===e.message.length)return!0;var t=e.message.length,n=e.message.split(" ").length,a=e.message.match(/([a-zA-Z]+\W*\d+)/g),s=n/t;if(e.type!==E.chat)return!0;if(1===e.message.length)return!1;if(e.message.startsWith("!bandit"))return!1;if(e.message.startsWith("!marble"))return!1;if(e.message.startsWith("!song"))return!1;if(e.message.indexOf("https://www.thingiverse.com")>-1);else{if("projektionbot"===e.userstate.username)return!1;if("streamelements"===e.userstate.username)return!1;if("sascha_lbot"===e.userstate.username)return!1;if(e.message.match(/~\d+/))return!1;if((a||[]).length>10&&s>.1)return!1}return!0})).map((function(e,t){switch(e.type){case E.cheer:return Object(B.jsx)(Z,{message:e},e.userstate.id);case E.raid:return Object(B.jsx)(J,{message:e},e.userstate.id);case E.sub:return Object(B.jsx)(G,{message:e},e.userstate.id);case E.subgift:return Object(B.jsx)(K,{message:e},e.userstate.id);case E.status:return Object(B.jsx)(Q,{message:e},e.userstate.id)}return Object(B.jsx)("div",{className:"w-full flex flex-1",children:Object(B.jsx)("div",{className:"flex-1 -my-1",children:Object(B.jsx)(P,{message:e})})},e.userstate.id)}))})},$=n(12),ee=n(46),te=n(72),ne=n.n(te),ae=n(5),se=n.n(ae),re=n(53),ce=n(3),ie=n(73),oe=n.n(ie),ue=Object(d.a)("login/token"),le=Object(d.a)("login/logout"),me=Object(d.a)("login/login"),de={processToken:ue,logout:le,login:me},be={loginProcess:!1},je=Object(d.b)(be,(function(e){e.addCase(de.processToken,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{token:t.payload,loginProcess:!1})})).addCase(de.logout,(function(e,t){return be})).addCase(de.login,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{loginProcess:!0})}))})),pe=function(e){return e.auth},fe=Object(N.a)(pe,(function(e){return e.token})),he={isLoggedIn:Object(N.a)(pe,(function(e){return!!e.token})),getToken:fe,isInLoginProcess:Object(N.a)(pe,(function(e){return e.loginProcess}))},ge=je,xe=Object(d.a)("twitch/userinfo"),Oe=Object(d.a)("twitch/streaminfo"),ve=Object(d.a)("twitch/followedStreams"),ye=Object(d.a)("twitch/followedStreams"),we={userInfoReceived:xe,streamInfoReceived:Oe,getFollowedStreams:ve,followedStreamsReceived:ye},ke={user:void 0},Ce=Object(d.b)(ke,(function(e){e.addCase(xe,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{user:t.payload})})).addCase(Oe,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{streamInfo:t.payload})})).addCase(le,(function(e,t){return ke}))})),Ne=function(e){return e.twitch},Ie=Object(N.a)(Ne,(function(e){return e.user})),Te={getUser:Ie,getUserId:Object(N.a)(Ie,(function(e){return null===e||void 0===e?void 0:e.id})),getStreamInfo:Object(N.a)(Ne,(function(e){return e.streamInfo}))},_e=Ce,De=n(74);n.n(De).a.config();var Me={TWITCH_CLIENT_ID:"1lk526oh4rsbzwcqowmcuc4m9agza3",DEBUG:!1},Ee=se.a.mark(He),Se=se.a.mark(Je),Ae=se.a.mark(Ge),ze=se.a.mark(Ke),Le=se.a.mark(qe),Be=se.a.mark(Ve),We=se.a.mark(Ye),Re=se.a.mark(Qe),Ue=se.a.mark(Xe),Fe=se.a.mark($e);function He(e){var t,n;return se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(ce.a)(Pe,e);case 3:t=a.sent;case 4:return a.next=8,Object(ce.g)(t);case 8:return n=a.sent,a.next=11,Object(ce.d)(n);case 11:a.next=4;break;case 13:case"end":return a.stop()}}),Ee)}function Pe(e){return Object(ee.b)((function(t){return e.on("connected",function(){var e=Object(re.a)(se.a.mark((function e(n){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(w.connected());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("chat",(function(e,n,a,s){t(p({id:n.id,type:E.chat,timestamp:new Date,message:a,userstate:n}))})),e.on("cheer",(function(e,n,a){t(p({id:n.id,type:E.cheer,timestamp:new Date,message:a,userstate:n}))})),e.on("subscription",(function(e,n,a,s,r){t(p({id:r.id,type:E.sub,timestamp:new Date,message:s,userstate:r}))})),e.on("resub",(function(e,n,a,s,r,c){t(p({id:r.id,type:E.sub,timestamp:new Date,message:s,userstate:r}))})),e.on("submysterygift",(function(e,n,a,s,r){t(p({id:r.id,type:E.subgift,timestamp:new Date,message:"hat ".concat(a," Subs verschenkt!"),userstate:r}))})),e.on("subgift",(function(e,n,a,s,r,c){t(p({id:c.id,type:E.subgift,timestamp:new Date,message:"hat ein Abo an ".concat(s," verschenkt!"),userstate:c}))})),e.on("messagedeleted",(function(e,n,a,s){t(f({channel:e,username:n,deletedMessage:a,messageId:s["target-msg-id"]}))})),e.on("action",(function(e,n,a,s){t(p({id:n.id,type:E.action,userstate:n,message:a,timestamp:new Date}))})),e.on("raided",(function(e,n,a){t(p({type:E.raid,message:"raidet mit ".concat(a," Personen!"),userstate:{"display-name":n},timestamp:new Date}))})),e.on("notice",(function(e,t,n){})),e.on("join",(function(e,n,a){a&&(t(w.channelJoined(e.substr(1))),t(p({id:(new Date).toDateString(),type:E.status,timestamp:new Date,message:"Verbunden mit ".concat(e),userstate:{}})))})),setTimeout((function(){}),1e3),Object(re.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,e.disconnect();case 3:case"end":return t.stop()}}),t)})))}))}var Ze=void 0;function Je(e,t){return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ze){n.next=9;break}return Ze=oe.a.client({options:{debug:Me.DEBUG,messagesLogLevel:Me.DEBUG?"info":"error",clientId:Me.TWITCH_CLIENT_ID},connection:{secure:!0,reconnect:!0},identity:{username:e,password:t&&"oauth:".concat(t)},channels:[]}),n.next=5,Object(ce.c)(He,Ze);case 5:return n.next=7,Object(ce.b)(100);case 7:return n.next=9,Ze.connect();case 9:return n.abrupt("return",(function(){}));case 10:case"end":return n.stop()}}),Se)}function Ge(e){var t,n;return se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.msgId,a.next=3,Object(ce.e)(T.getChannelName);case 3:if(n=a.sent,!Ze){a.next=13;break}return a.prev=5,a.next=8,Ze.deletemessage(n,t);case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(5);case 13:case"end":return a.stop()}}),Ae,null,[[5,10]])}function Ke(e){var t,n,a,s,r;return se.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.duration,a=t.reason,s=t.username,c.next=3,Object(ce.e)(T.getChannelName);case 3:if(r=c.sent,!Ze){c.next=13;break}return c.prev=5,c.next=8,Ze.timeout(r,s,n,a);case 8:c.next=13;break;case 10:c.prev=10,c.t0=c.catch(5);case 13:case"end":return c.stop()}}),ze,null,[[5,10]])}function qe(){var e,t,n;return se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ce.e)(T.getChannelName);case 2:e=a.sent;case 3:return a.next=6,Object(ce.g)(w.selectChannel.type);case 6:return t=a.sent,n=t.payload,a.next=11,Object(ce.e)(T.getChannelName);case 11:if(!(e=a.sent)||!Ze){a.next=21;break}return a.prev=13,a.next=16,Ze.part(e);case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(13);case 21:if(!Ze){a.next=24;break}return a.next=24,Ze.join(n);case 24:a.next=3;break;case 26:case"end":return a.stop()}}),Le,null,[[13,18]])}function Ve(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ze){e.next=10;break}return e.prev=1,e.next=4,Ze.disconnect();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1);case 9:Ze=void 0;case 10:case"end":return e.stop()}}),Be,null,[[1,6]])}function Ye(){var e;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(ce.g)(w.connected.type);case 3:return t.next=5,Object(ce.e)(T.getChannelName);case 5:if(e=t.sent,!Ze){t.next=10;break}return t.next=10,Ze.join(e);case 10:case"end":return t.stop()}}),We)}function Qe(e){var t,n,a;return se.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.next=3,Object(ce.a)(Ve);case 3:return s.next=5,Object(ce.c)(Ye);case 5:return s.next=7,Object(ce.g)(we.userInfoReceived.type);case 7:return n=s.sent,a=n.payload,s.next=11,Object(ce.a)(Je,a.login,t);case 11:case"end":return s.stop()}}),Re)}function Xe(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.a)(Ve);case 2:return e.next=4,Object(ce.c)(Ye);case 4:return e.next=6,Object(ce.a)(Je,void 0,void 0);case 6:case"end":return e.stop()}}),Ue)}function $e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.c)(qe);case 2:return e.next=4,Object(ce.h)(de.processToken.type,Qe);case 4:return e.next=6,Object(ce.h)(de.logout.type,Xe);case 6:return e.next=8,Object(ce.g)(de.processToken.type);case 8:if(!e.sent){e.next=13;break}return e.next=11,Object(ce.h)(w.deleteMessage.type,Ge);case 11:return e.next=13,Object(ce.h)(w.timeoutUser.type,Ke);case 13:case"end":return e.stop()}}),Fe)}var et=n(29),tt=n.n(et),nt=se.a.mark(rt),at=se.a.mark(ct),st=se.a.mark(it);function rt(e){var t,n;return se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=4,tt.a.get("https://id.twitch.tv/oauth2/userinfo",{headers:{Authorization:"Bearer ".concat(t)}});case 4:n=a.sent,n.data;case 7:case"end":return a.stop()}}),nt)}function ct(e){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(i.a)(e),t.next=3,St.flush();case 3:window.location.href="https://id.twitch.tv/oauth2/authorize?client_id=".concat(Me.TWITCH_CLIENT_ID,"&redirect_uri=").concat(window.location.origin,"/minimal-twitch-chat-react/login/callback&force_verify=false&response_type=token&scope=").concat(encodeURIComponent("chat:edit chat:read channel:moderate"),"&claims=sub,exp");case 4:case"end":return t.stop()}}),at)}function it(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(ce.g)("persist/REHYDRATE");case 3:return e.next=5,Object(ce.e)(he.isInLoginProcess);case 5:if(e.sent){e.next=12;break}return e.next=10,Object(ce.d)(w.resetMessages());case 10:return e.next=12,Object(ce.d)(de.logout());case 12:return e.next=14,Object(ce.h)(de.login.type,ct);case 14:return e.next=16,Object(ce.h)(de.processToken.type,rt);case 16:case"end":return e.stop()}}),st)}var ot=se.a.mark(bt),ut=se.a.mark(jt),lt=se.a.mark(pt),mt=se.a.mark(ft),dt=se.a.mark(ht);function bt(){var e,t,n;return se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ce.e)(he.getToken);case 2:return e=a.sent,a.next=5,tt.a.get("https://api.twitch.tv/helix/users",{headers:{Authorization:"Bearer ".concat(e),"Client-Id":Me.TWITCH_CLIENT_ID}});case 5:return t=a.sent,n=t.data,a.next=9,Object(ce.d)(we.userInfoReceived(n.data[0]));case 9:case"end":return a.stop()}}),ot)}function jt(e){var t,n,a;return se.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(ce.e)(he.getToken);case 2:return t=s.sent,s.next=5,tt.a.get("https://api.twitch.tv/helix/users",{headers:{Authorization:"Bearer ".concat(t),"Client-Id":Me.TWITCH_CLIENT_ID},params:{login:e}});case 5:if(n=s.sent,!(a=n.data).data[0]){s.next=10;break}return s.abrupt("return",a.data[0].id);case 10:throw new Error("channel not found");case 11:case"end":return s.stop()}}),ut)}function pt(){var e,t,n,a,s;return se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(ce.e)(he.isLoggedIn);case 2:if(!r.sent){r.next=26;break}return r.next=6,Object(ce.e)(T.getChannelName);case 6:if(!(e=r.sent)){r.next=26;break}return r.next=10,jt(e);case 10:return t=r.sent,r.next=13,Object(ce.e)(he.getToken);case 13:n=r.sent;case 14:return r.next=17,tt.a.get("https://api.twitch.tv/helix/streams",{headers:{Authorization:"Bearer ".concat(n),"Client-Id":Me.TWITCH_CLIENT_ID},params:{user_id:t}});case 17:return a=r.sent,s=a.data,r.next=22,Object(ce.d)(Oe(s.data[0]));case 22:return r.next=24,Object(ce.b)(3e4);case 24:r.next=14;break;case 26:case"end":return r.stop()}}),lt)}function ft(){var e,t,n,a;return se.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(ce.e)(Te.getUserId);case 2:return e=s.sent,s.next=5,Object(ce.e)(he.getToken);case 5:return t=s.sent,s.next=8,tt.a.get("https://api.twitch.tv/helix/streams/followed",{params:{user_id:e},headers:{Authorization:"Bearer ".concat(t),"Client-Id":Me.TWITCH_CLIENT_ID}});case 8:return n=s.sent,a=n.data,s.next=12,Object(ce.d)(ye(a.data));case 12:case"end":return s.stop()}}),mt)}function ht(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(ce.h)(de.processToken.type,bt);case 3:return e.next=5,Object(ce.h)([de.processToken.type,w.channelJoined.type],pt);case 5:return e.next=7,Object(ce.h)(we.getFollowedStreams.type,ft);case 7:case"end":return e.stop()}}),dt)}var gt=se.a.mark(xt);function xt(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(ce.f)($e);case 3:return e.next=5,Object(ce.f)(it);case 5:return e.next=7,Object(ce.f)(ht);case 7:case"end":return e.stop()}}),gt)}var Ot,vt=n(54),yt=n(75),wt=n.n(yt),kt=n(25),Ct=n(70),Nt=n(28),It=function(e){return Object($.b)({chat:_,auth:ge,router:Object(Nt.b)(e),twitch:_e})},Tt={key:"minimal-twitch-chat",storage:wt.a,blacklist:["twitch"]},_t=Object(kt.a)({basename:"/minimal-twitch-chat-react/"}),Dt=Object(ee.a)(),Mt=It(_t),Et=Object(vt.a)(Tt,Mt);Ot=Object($.d)(Et,Object($.a)(Dt,Object(Ct.a)(_t),ne.a)),Dt.run(xt);var St=Object(vt.b)(Ot),At=Ot,zt=n(15),Lt=function(){var e=Object(q.f)(),t=Y.a.parse(e.hash),n=Object(o.d)();return n(de.processToken(t.access_token||t.id_token)),n(Object(zt.d)("/")),null},Bt=function(e){var t=e.children;Object(o.d)(),Object(q.e)();return Object(B.jsxs)(q.c,{children:[Object(B.jsx)(q.a,{path:"/login/callback",children:Object(B.jsx)(Lt,{})}),t]})},Wt=(n.p,n.p,n.p,function(e){var t=e.user;return Object(B.jsx)("div",{className:"user-info flex items-center space-x-2",children:Object(B.jsx)("img",{className:"h-7 rounded-full",src:t.profile_image_url})})}),Rt=(n.p,n(135)),Ut=n(136),Ft=function(e){var t=e.buttonComponent,n=e.items,s=e.origin,r=void 0===s?"origin-bottom-right":s,c=e.className;return Object(B.jsx)("div",{className:Object(L.a)("drop-down-menu z-50",c),children:Object(B.jsxs)(Rt.a,{as:"div",className:"relative z-50",children:[Object(B.jsx)("div",{children:Object(B.jsxs)(Rt.a.Button,{className:"bg-gray-800 flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(B.jsx)("span",{className:"sr-only",children:"Open user menu"}),t]})}),Object(B.jsx)(Ut.a,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(B.jsx)(Rt.a.Items,{className:Object(L.a)(r,"origin-top-left"===r&&"right-0","absolute mt-2 w-48 z-50 rounded-md shadow-lg py-1 cursor-pointer\t bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"),children:n.filter((function(e){return e})).map((function(e){return e})).map((function(e,t){return Object(B.jsx)(Rt.a.Item,{children:function(t){var n=t.active;return Object(B.jsx)("a",{onClick:function(t){t.preventDefault(),e.onClick()},className:Object(L.a)(n?"bg-gray-100":"","cursor-pointer block px-4 py-2 text-sm text-gray-700"),children:e.title})}},"menu-item=".concat(t))}))})})]})})},Ht=n(31),Pt=(n.p,function(e){var t=e.currentChannel,n=e.onSubmit,s=e.className,r=Object(a.useState)(""),c=Object(R.a)(r,2),i=c[0],o=c[1];return Object(B.jsxs)("div",{className:Object(L.a)("chat-input items-center flex space-x-1",s),children:[Object(B.jsx)("input",{className:"bg-white text-black border-0 rounded-full h-7 px-4",value:i,placeholder:t,onKeyDown:function(e){"Enter"===e.key&&n&&n(i)},onChange:function(e){o(e.target.value)}}),0===i.length||i===t?Object(B.jsx)(Ht.b,{className:"w-8 "}):Object(B.jsx)(Ht.a,{onClick:function(){n&&i&&i.length>0&&n(i)},className:"w-8 cursor-pointer"})]})}),Zt=function(e){Object(i.a)(e);var t=Object(o.e)(he.isLoggedIn),n=Object(o.e)(Te.getUser),a=Object(o.e)(Te.getStreamInfo),s=Object(o.e)(T.getChannelName),r=Object(o.d)();return Object(B.jsxs)("menu",{className:"text-white bg-indigo-900 flex flex-row h-12 space-x-2 items-center p-2 fixed w-full top-0",children:[Object(B.jsx)(Ft,{origin:"origin-top-right",buttonComponent:Object(B.jsx)(Ht.d,{className:"bg-gray-800 hover:bg-indigo-500 transition rounded-full p-1 w-8"}),items:[{title:"Chat",onClick:function(){r(Object(zt.d)("/"))}},t&&{title:"Kan\xe4le",onClick:function(){r(Object(zt.d)("/channels"))}}].filter((function(e){return e}))}),Object(B.jsx)(Pt,{onSubmit:function(e){r(w.selectChannel(e))},currentChannel:s}),Object(B.jsx)("div",{className:"flex flex-1 flex-shrink flex flex-row truncate",children:a&&Object(B.jsxs)("div",{className:"stream-info flex flex-1 items-center flex-shrink space-x-4 truncate",children:[Object(B.jsxs)("div",{className:"bg-purple-500 text-sm rounded-full items-center justify-center flex-shrink-0 flex p-1 px-2",children:[a.viewer_count,Object(B.jsx)("span",{className:"hidden lg:block",children:"\xa0Zuschauer"})]}),Object(B.jsx)("div",{className:"flex-shrink truncate",children:a.title})]})}),Object(B.jsxs)("div",{className:"flex-shrink-0  flex self-align-end",children:[n&&Object(B.jsx)(Ft,{origin:"origin-top-left",items:[{title:"Einstellungen",onClick:function(){r(Object(zt.d)("/settings"))}},{title:"Abmelden",onClick:function(){r(de.logout())}}],buttonComponent:Object(B.jsx)(Wt,{user:n})}),!t&&Object(B.jsx)("div",{className:"text-white",children:Object(B.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:function(e){e.preventDefault(),r(de.login())},children:[Object(B.jsx)(Ht.c,{className:"w-8 mr-2 cursor-pointer"})," Anmelden"]})})]})]})},Jt=function(e){var t=e.children;return Object(B.jsxs)("div",{className:"base-screen",children:[Object(B.jsx)(Zt,{}),Object(B.jsx)("div",{className:"content pt-12",children:t})]})},Gt=(n.p,function(e){Object(i.a)(e);var t=Object(o.d)();return Object(a.useEffect)((function(){t(we.getFollowedStreams())}),[]),Object(B.jsx)("div",{className:"channel-list"})}),Kt=n(77);var qt=function(){return Object(B.jsx)("div",{className:"App dark:bg-black",children:Object(B.jsx)(o.a,{store:At,children:Object(B.jsx)(Kt.a,{loading:null,persistor:St,children:Object(B.jsx)(Nt.a,{history:_t,children:Object(B.jsx)(Bt,{children:Object(B.jsx)(q.c,{children:Object(B.jsx)(q.a,{children:Object(B.jsx)(Jt,{children:Object(B.jsxs)(q.c,{children:[Object(B.jsx)(q.a,{path:"/channels",children:Object(B.jsx)(Gt,{})}),Object(B.jsx)(q.a,{children:Object(B.jsx)(X,{})})]})})})})})})})})})},Vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(B.jsx)(s.a.StrictMode,{children:Object(B.jsx)(qt,{})}),document.getElementById("root")),Vt()},61:function(e,t){},82:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.f4102324.chunk.js.map